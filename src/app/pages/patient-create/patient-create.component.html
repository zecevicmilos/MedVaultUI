<div class="card">
  <h3>Novi pacijent</h3>

  <form [formGroup]="form" (ngSubmit)="submit()" class="grid" style="grid-template-columns:1fr 1fr;" novalidate>

    <div>
      <div class="label">Ime</div>
      <input class="input" formControlName="firstName" placeholder="Unesite ime" />
    </div>

    <div>
      <div class="label">Prezime</div>
      <input class="input" formControlName="lastName" placeholder="Unesite prezime" />
    </div>

    <div>
      <div class="label">JMBG</div>
      <input
        class="input"
        formControlName="jmbg"
        inputmode="numeric"
        autocomplete="off"
        spellcheck="false"
        maxlength="13"
        placeholder="Unesite JMBG (13 cifara)"
      />
      <small class="muted" *ngIf="f['jmbg']?.touched && f['jmbg']?.invalid">
        JMBG mora sadržati tačno 13 cifara.
      </small>
    </div>

    <div>
      <div class="label">E-mail</div>
      <input class="input" type="email" formControlName="email" placeholder="Unesite e-mail adresu" />
    </div>

    <div>
      <div class="label">Broj telefona</div>
      <input class="input" formControlName="phone" placeholder="Unesite broj telefona" />
    </div>

    <div>
      <div class="label">Adresa</div>
      <input class="input" formControlName="address" placeholder="Unesite adresu" />
    </div>

    <div>
      <div class="label">Broj zdravstvenog kartona</div>
      <input class="input" formControlName="medicalRecordNumber" placeholder="Unesite broj zdravstvenog kartona" />
    </div>
    
    <div>
      <div class="label">Odeljenje</div>
      <select class="input" formControlName="departmentId">
        <option value="">— odaberite odeljenje —</option>
        <option *ngFor="let d of departments" [value]="d.id">{{ d.name }}</option>
      </select>
      <small class="muted" *ngIf="f['departmentId']?.touched && f['departmentId']?.invalid">
        Odeljenje je obavezno.
      </small>
    </div>

    <div style="grid-column:1/-1" class="mt">
      <button class="btn ok" type="submit" [disabled]="form.invalid || loading">Sačuvaj</button>
    </div>
  </form>
</div>
